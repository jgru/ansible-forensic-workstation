---
- name: Install zsh, git, powerline, tmux
  apt: pkg={{ item }}
  with_items:
    - git
    - zsh
    - tmux
    - powerline
  register: installation

- name: set default shell for user
  user:
    name: '{{ ansible_user }}'
    shell: /bin/zsh

- name: Cloning oh-my-zsh
  git:
    repo=https://github.com/robbyrussell/oh-my-zsh
    dest={{ OMZSH_DIR }}
  when: installation is success
  register: cloning

- name: Cloning zsh-autosuggestions
  git:
    repo=https://github.com/zsh-users/zsh-autosuggestions
    dest={{ OMZSH_CUSTOM }}/plugins/zsh-autosuggestions
  when: installation is success

- name: Upload aliases
  copy:
    src=aliases
    dest=/home/{{ ansible_user}}/.aliases

- name: Upload zshrc
  copy:
    src=zshrc
    dest=/home/{{ ansible_user}}/.zshrc
  when: cloning is success

- name: Upload .tmux.conf
  copy:
    src=tmux.conf
    dest=/home/{{ ansible_user }}/.tmux.conf
